{% extends "base.html" %}

{% block title %}Izmeni Komitenta - OBVEZNIK{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1><i class="fa-solid fa-user-pen"></i> Izmeni Komitenta: {{ komitent.naziv }}</h1>

    <div class="card mt-4">
        <div class="card-body">
            <form method="POST" action="{{ url_for('komitenti.izmeni', id=komitent.id) }}">
                {{ form.hidden_tag() }}

                <!-- PIB (Readonly) -->
                <div class="row mb-4">
                    <div class="col-md-12">
                        <label for="pib" class="form-label">PIB * (ne može se menjati)</label>
                        {{ form.pib(class="form-control bg-light", id="pib", readonly=true) }}
                        <small class="form-text text-muted">PIB ne može biti izmenjen nakon kreiranja komitenta.</small>
                    </div>
                </div>

                <!-- Company Basic Info -->
                <h4 class="mt-4">Osnovni Podaci</h4>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="naziv" class="form-label">Naziv Komitenta *</label>
                        {{ form.naziv(class="form-control" ~ (" is-invalid" if form.naziv.errors else ""), id="naziv") }}
                        {% if form.naziv.errors %}
                            <div class="invalid-feedback">{{ form.naziv.errors[0] }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="maticni_broj" class="form-label">Matični Broj *</label>
                        {{ form.maticni_broj(class="form-control" ~ (" is-invalid" if form.maticni_broj.errors else ""), id="maticni_broj") }}
                        {% if form.maticni_broj.errors %}
                            <div class="invalid-feedback">{{ form.maticni_broj.errors[0] }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Address Info -->
                <h4 class="mt-4">Adresa</h4>
                <div class="row mb-3">
                    <div class="col-md-8">
                        <label for="adresa" class="form-label">Ulica *</label>
                        {{ form.adresa(class="form-control" ~ (" is-invalid" if form.adresa.errors else ""), id="adresa") }}
                        {% if form.adresa.errors %}
                            <div class="invalid-feedback">{{ form.adresa.errors[0] }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label for="broj" class="form-label">Broj *</label>
                        {{ form.broj(class="form-control" ~ (" is-invalid" if form.broj.errors else ""), id="broj") }}
                        {% if form.broj.errors %}
                            <div class="invalid-feedback">{{ form.broj.errors[0] }}</div>
                        {% endif %}
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="postanski_broj" class="form-label">Poštanski Broj *</label>
                        {{ form.postanski_broj(class="form-control" ~ (" is-invalid" if form.postanski_broj.errors else ""), id="postanski_broj") }}
                        {% if form.postanski_broj.errors %}
                            <div class="invalid-feedback">{{ form.postanski_broj.errors[0] }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label for="mesto" class="form-label">Mesto *</label>
                        {{ form.mesto(class="form-control" ~ (" is-invalid" if form.mesto.errors else ""), id="mesto") }}
                        {% if form.mesto.errors %}
                            <div class="invalid-feedback">{{ form.mesto.errors[0] }}</div>
                        {% endif %}
                    </div>
                    <div class="col-md-4">
                        <label for="drzava" class="form-label">Država *</label>
                        {{ form.drzava(class="form-control" ~ (" is-invalid" if form.drzava.errors else ""), id="drzava") }}
                        {% if form.drzava.errors %}
                            <div class="invalid-feedback">{{ form.drzava.errors[0] }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Contact Info -->
                <h4 class="mt-4">Kontakt Informacije</h4>
                <div class="row mb-3">
                    <div class="col-md-12">
                        <label for="email" class="form-label">Email *</label>
                        {{ form.email(class="form-control" ~ (" is-invalid" if form.email.errors else ""), id="email") }}
                        {% if form.email.errors %}
                            <div class="invalid-feedback">{{ form.email.errors[0] }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Submit Buttons -->
                <div class="d-flex gap-2 mt-4">
                    <button type="submit" class="btn btn-primary">
                        <i class="fa-solid fa-save"></i> Sačuvaj Izmene
                    </button>
                    <a href="{{ url_for('komitenti.detail', id=komitent.id) }}" class="btn btn-secondary">
                        <i class="fa-solid fa-times"></i> Otkaži
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
